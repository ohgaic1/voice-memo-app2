# 🎙️ 音声メモアプリ（高品質版）

大容量音声ファイル対応 + Plaud風の詳細レポート生成が可能な音声メモアプリです。

## ✨ 主な機能

### 1. 大容量ファイル対応
- **25MB制限を突破**: 自動圧縮・分割処理により、どんなサイズの音声ファイルも処理可能
- **ffmpeg使用**: 高品質な音声圧縮（モノラル、16kHz、32kbps）
- **自動分割**: 大きなファイルは10分単位で分割して処理
- **プログレスバー表示**: 処理の進行状況を可視化

### 2. Plaud風の詳細レポート
従来の簡易的な要約ではなく、以下の要素を含む高品質なレポートを生成:

- **📝 エグゼクティブサマリー**: 核心を捉えた2-3段落の要約
- **🎯 キーポイント**: 5-10個の重要ポイント（具体的な内容付き）
- **💡 主要な洞察と分析**: なぜ重要か、どんな意味があるかを深掘り
- **✅ アクションアイテム**: 実行可能な具体的タスク（優先度付き）
- **🗣️ 重要な発言・引用**: 特に印象的な発言を抜粋
- **📊 トピック別詳細分析**: 主要トピックごとの深い分析
- **🔄 フォローアップ事項**: 未解決の問題や次のステップ
- **📌 メタ情報**: 所要時間、参加者、緊急度など

### 3. GPT-4o使用
- 最新のGPT-4oモデルを使用して高品質な分析を実現
- 日本語に最適化されたプロンプト設計

## 🚀 デプロイ方法

### Streamlit Cloudへのデプロイ

1. GitHubリポジトリを作成し、以下のファイルをアップロード:
   - `voice_memo_app.py`
   - `requirements.txt`
   - `packages.txt`
   - `README.md`

2. [Streamlit Cloud](https://streamlit.io/cloud)にアクセス

3. "New app"をクリックし、リポジトリを選択

4. `voice_memo_app.py`をメインファイルとして指定

5. デプロイ完了！

### ローカル実行

```bash
# 依存パッケージのインストール
pip install -r requirements.txt

# ffmpegのインストール（必須）
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt-get install ffmpeg

# Windows
# https://ffmpeg.org/download.html からダウンロード

# アプリの起動
streamlit run voice_memo_app.py
```

## 📖 使い方

1. **APIキーの設定**
   - サイドバーにOpenAI APIキーを入力
   - [OpenAI Platform](https://platform.openai.com/api-keys)で取得可能

2. **音声ファイルのアップロード**
   - MP3, WAV, M4A, WebM形式に対応
   - ファイルサイズの制限なし（自動で最適化）

3. **処理の実行**
   - 「文字起こし＆レポート生成」ボタンをクリック
   - 自動で文字起こしとレポート生成が実行される

4. **結果の確認**
   - 文字起こしテキストは折りたたみ表示
   - 詳細レポートはメイン画面に表示
   - 両方ともダウンロード可能

## 🛠️ 技術仕様

### 音声処理
- **文字起こし**: OpenAI Whisper API
- **圧縮・分割**: ffmpeg
- **対応形式**: MP3, WAV, M4A, WebM

### レポート生成
- **モデル**: GPT-4o
- **Temperature**: 0.3（一貫性重視）
- **プロンプト**: Plaud風の詳細レポート生成に最適化

### ファイル処理フロー
```
音声ファイル
    ↓
サイズチェック (> 24MB?)
    ↓ YES
圧縮処理 (モノラル、16kHz、32kbps)
    ↓
まだ大きい? (> 24MB?)
    ↓ YES
10分単位で分割
    ↓
各チャンクを文字起こし
    ↓ NO (元サイズ or 圧縮後)
通常の文字起こし
    ↓
結合してレポート生成
```

## 🎯 改善点

### 従来版の問題点
1. ❌ 25MBのファイルサイズ制限
2. ❌ 簡易的な要約のみ
3. ❌ 実用性の低いレポート

### 改善版の特徴
1. ✅ **無制限のファイルサイズ対応**
   - 自動圧縮（モノラル、16kHz）
   - 自動分割（10分チャンク）
   - プログレスバー表示

2. ✅ **Plaud品質のレポート**
   - 8つのセクション構成
   - 具体的な内容抽出
   - 実践的なアクションアイテム
   - 深い洞察と分析

3. ✅ **ユーザーエクスペリエンス向上**
   - 処理状況の可視化
   - エラーハンドリング強化
   - ダウンロード機能完備

## 💡 使用例

### 会議の録音（45分、50MB）
- 自動で圧縮＆分割処理
- 5つのチャンクに分割して文字起こし
- 統合された詳細レポート生成
- アクションアイテムを明確化

### インタビュー（2時間、120MB）
- 12のチャンクで処理
- 主要な引用を抽出
- トピック別に整理
- フォローアップ事項を特定

## 🔒 セキュリティ

- APIキーはセッションストレージに保存（ブラウザを閉じると削除）
- 音声ファイルは一時ファイルとして処理後削除
- OpenAI APIのデータポリシーに準拠

## 📝 ライセンス

MIT License

## 🤝 サポート

問題が発生した場合:
1. ffmpegがインストールされているか確認
2. OpenAI APIキーが有効か確認
3. 音声ファイルの形式を確認

## 🔄 更新履歴

### v2.0.0 (2025-02-17)
- ✨ 大容量ファイル対応（圧縮・分割機能）
- ✨ Plaud風の詳細レポート生成
- ✨ GPT-4o使用
- 🐛 エラーハンドリング改善
- 💄 UI/UX改善
